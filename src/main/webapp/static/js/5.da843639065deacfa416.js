webpackJsonp([5],{Tvc1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4YfN"),s=a.n(i),l=a("AnyI"),o={data:function(){return{value:"",list:[],config:{title:"专业看板维护",dialogVisible:!1,width:"500px",btnData:["cancel","save"]},rules:{alias:[{required:!0,message:"请输入模板名称",trigger:"blur"}]},form:{alias:"",templatePath:""},dialogVisible:!1,dialogImageUrl:""}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.$apis.fetchPost(l.a.pageUrl,{params:{alias:this.value},Vue:this}).then(function(e){e.result&&(t.list=e.model.items)})},submitUpload:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;t.$refs.upload.submit()})},upload:function(){this.config.dialogVisible=!0},handleSuccess:function(t){var e=this;this.form.templatePath=t.fileUrl,this.$apis.fetchPost(l.a.addTemplateUrl,{params:s()({},this.form),Vue:this}).then(function(t){t.result&&(e.getList(),e.config.dialogVisible=!1,e.$refs.upload.clearFiles())})},handlePictureCardPreview:function(t){this.dialogImageUrl=t,this.dialogVisible=!0},handleRemove:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$apis.fetchPost(l.a.delUrl,{params:{id:t},Vue:e}).then(function(t){t.result&&(e.getList(),e.$message({type:"success",message:"删除成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"major-border"},[a("div",{staticClass:"major-header"},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"500px"},attrs:{placeholder:"请输入内容"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.getList()}},slot:"append"})],1),t._v(" "),a("el-button",{staticClass:"uploadBtn",attrs:{type:"primary"},on:{click:t.upload}},[t._v("上传报表")])],1),t._v(" "),a("div",{staticClass:"major-main"},[a("el-row",{attrs:{gutter:20}},t._l(t.list,function(e){return a("el-col",{staticClass:"flame-box",attrs:{span:6}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.alias))])]),t._v(" "),a("div",{staticClass:"flame-box-con"},[a("img",{attrs:{src:e.pic,alt:""}})])]),t._v(" "),a("span",{staticClass:"cover"},[a("span",{staticClass:"preview",on:{click:function(a){t.handlePictureCardPreview(e.pic)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),t._v(" "),a("span",{staticClass:"delete",on:{click:function(a){t.handleRemove(e.id)}}},[a("i",{staticClass:"el-icon-delete"})])])],1)}))],1),t._v(" "),a("board-toast",{attrs:{config:t.config},on:{save:t.submitUpload,cancel:function(e){t.config.dialogVisible=!1},handleClose:function(e){t.config.dialogVisible=!1}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"alias"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:""},model:{value:t.form.alias,callback:function(e){t.$set(t.form,"alias",e)},expression:"form.alias"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板文件",prop:"templatePath"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-success":t.handleSuccess,limit:1,action:"http://122.225.78.66:8899/fileSystem/uploadFile","auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请上传zip文件，且必须包含html文件与图片")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,title:"查看详情"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var r=a("C7Lr")(o,n,!1,function(t){a("f5FF")},null,null);e.default=r.exports},f5FF:function(t,e){}});