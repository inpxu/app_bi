webpackJsonp([3],{"9Bl9":function(e,t,a){"use strict";t.a={sideBar:{search:"/app_bi/layout/getFolder",add_File:"/app_bi/layout/addFolder",edit_File:"/app_bi/layout/upFolder",del_File:"/app_bi/layout/delFolder",search_layout:"/app_bi/layout/getDesign",add_layout:"/app_bi/layout/addDesign",edit_layout:"/app_bi/layout/upDesign",del_layout:"/app_bi/layout/delDesign"}}},GO7m:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),s=a.n(i),n=a("HzJ8"),r=a.n(n),o=a("WNAK"),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-setting"},[a("div",{staticClass:"layout-setting-body"},[a("div",{staticClass:"layout-setting-head"},[e._v("\n      "+e._s(e.$t("layout.setting.title"))+"\n    ")]),e._v(" "),a("div",{staticClass:"line-setting"},[a("div",{staticClass:"line-setting-btn"},[a("span",[e._v(e._s(e.$t("layout.setting.theFirst")))]),e._v("\n        "+e._s(e.line+1)+"\n        "),a("span",[e._v(e._s(e.$t("layout.setting.line")))])]),e._v(" "),a("div",{staticClass:"edit-line"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fromData.span,expression:"fromData.span"},{name:"number-input",rawName:"v-number-input"}],attrs:{placeholder:"请输入列数"},domProps:{value:e.fromData.span},on:{input:function(t){t.target.composing||e.$set(e.fromData,"span",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"line-setting-btn"},[a("span",[e._v(e._s(e.$t("layout.setting.column")))])])]),e._v(" "),a("div",{staticClass:"line-setting"},[a("div",{staticClass:"line-setting-btn"},[a("span",[e._v(e._s(e.$t("layout.setting.columnWidth")))])]),e._v(" "),a("div",{staticClass:"edit-line"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fromData.width,expression:"fromData.width"}],attrs:{placeholder:"请按规程填写(50%,...)"},domProps:{value:e.fromData.width},on:{input:function(t){t.target.composing||e.$set(e.fromData,"width",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"line-add"},[a("el-button",{attrs:{size:"small"},on:{click:e.addline}},[e._v("添加行")])],1)])])},staticRenderFns:[]};var d=a("C7Lr")({props:["line"],data:function(){return{fromData:{span:"",width:""}}},mounted:function(){},methods:{addline:function(){if(this.fromData.span)if(this.fromData.span>5)this.setNotify("每行列数不能超过5");else if(this.fromData.width)if(/^(\d{1,3}%,{0,1}){1,5}$/.test(this.fromData.width)){var e=this.ischenkData(this.fromData.width,this.fromData.span);e?(this.$emit("addline",e),this.$emit("save")):this.setNotify("您输入的数值不合理，请重新输入")}else this.setNotify("请检查列宽格式");else this.setNotify("请输入列宽");else this.setNotify("请输入列")},setNotify:function(e){this.$notify({title:"友情提示",message:e,type:"warning",duration:1500})},ischenkData:function(e,t){var a=0,i=[];e.replace(/(?:(\d{1,3})%,{0,1})/g,"$1,").split(",").forEach(function(e){e&&(a+=e-0,i.push(e-0))});var s=t-i.length;return(a<=100&&0===s||a<100&&(100-a)/s>1)&&{all:a,ws:i,span:t-0}}}},l,!1,function(e){a("l6i0")},null,null).exports,u=a("xXv6"),c=a("9Bl9"),f={data:function(){return{url:null,configData:{layout:[],rowHeight:200,isDraggable:!0,isResizable:!0,line:1},currentNode:{config:[],id:void 0,folderId:void 0,alias:void 0}}},created:function(){this.url=c.a},mounted:function(){this.$refs.sidebar.filterData()},methods:{addline:function(e){this.$refs.superLayout.addLine(e)},setCurrentLine:function(){var e=-1,t=!0,a=!1,i=void 0;try{for(var s,n=r()(this.configData.layout);!(t=(s=n.next()).done);t=!0){var o=s.value;o.y>e&&(e=o.y)}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}this.configData.line=e+1},layoutChange:function(){this.setCurrentLine(),this.save()},handleDel:function(e,t){this.configData.layout.splice(t,1),this.setCurrentLine(),this.save()},save:function(){var e=this,t={line:this.configData.line,layout:this.configData.layout},a={id:this.currentNode.id,folderId:this.currentNode.folderId,alias:this.currentNode.alias,config:s()(t)};this.$apis.fetchPost(this.url.sideBar.edit_layout,{params:a,Vue:this}).then(function(t){t.result?e.$message({type:"success",message:t.message}):e.$message({type:"warning",message:t.message})})}},components:{siderBar:o.a,layoutSetting:d,superLayout:u.a}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-center"},[a("sider-bar",{ref:"sidebar",attrs:{title:"布局库",urls:e.url,currentNode:e.currentNode,configData:e.configData}},[a("i",{staticClass:"iconfont icon-gengduo",attrs:{index:3}})]),e._v(" "),a("div",{staticClass:"layout-display"},[a("div",{staticClass:"layout-display-body"},[a("super-layout",{ref:"superLayout",attrs:{config:e.configData,isToolbar:!1,tool:["delete"]},on:{handledelete:e.handleDel,resized:e.layoutChange,moved:e.layoutChange}})],1)]),e._v(" "),a("layout-setting",{attrs:{line:e.configData.line},on:{addline:e.addline,save:e.save}})],1)},staticRenderFns:[]};var h=a("C7Lr")(f,m,!1,function(e){a("uKtV")},null,null);t.default=h.exports},HzJ8:function(e,t,a){e.exports={default:a("oMO2"),__esModule:!0}},"Q/Y4":function(e,t){},WNAK:function(e,t,a){"use strict";var i=a("3cXf"),s=a.n(i),n=a("4YfN"),r=a.n(n),o={data:function(){var e=this;return{dialogConfig:{title:"修改布局名称",dialogVisible:!1,width:"400px",btnData:["cancel","save"]},baseData:[],rules:{name:[{validator:function(t,a,i){""===a?i(new Error("请输入文件名称")):-1!==e.baseData.findIndex(function(e){return e.alias===a})?i(new Error("文件夹下已存在该名称")):i()},trigger:"blur"}]},ruleForm:{name:""},url:""}},props:["title"],mounted:function(){},methods:{show:function(e,t){this.dialogConfig.title="新增"+this.title,this.ruleForm.name="",this.url=t,this.baseData=e,this.dialogConfig.dialogVisible=!0},close:function(){this.dialogConfig.dialogVisible=!1},save:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var a={alias:e.ruleForm.name};e.$apis.fetchPost(e.url,{params:a,Vue:e}).then(function(t){t.result?(e.$parent.filterData(),e.close(),e.$message({type:"success",message:t.message})):e.$message({type:"warning",message:t.message})})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogConfig.dialogVisible?a("board-toast",{attrs:{config:e.dialogConfig},on:{cancel:e.close,save:e.save}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"文件名称",prop:"name"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{size:"mini"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name","string"==typeof t?t.trim():t)},expression:"ruleForm.name"}})],1)],1)],1)],1):e._e()},staticRenderFns:[]},d=a("C7Lr")(o,l,!1,null,null,null).exports,u={data:function(){return{dialogConfig:{title:"修改布局名称",dialogVisible:!1,width:"400px",btnData:["cancel","save"],labelName:""},baseData:[],rules:{name:[{validator:function(e,t,a){""===t?a(new Error("请输入名称")):a()},trigger:"blur"}]},ruleForm:{name:"",id:""},url:"",parentId:-1,config:null}},props:["title"],mounted:function(){},methods:{show:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments[4];this.url=t,this.baseData=e,this.ruleForm.name=a.alias,this.parentId=s,this.config=a.config,this.ruleForm.id=a.id,"布局库"==this.title?(this.dialogConfig.title="编辑"==i?"布局重命名":"文件夹重命名",this.dialogConfig.labelName="编辑"==i?"布局名称":"文件夹名称"):(this.dialogConfig.title="编辑"==i?"看板重命名":"文件夹重命名",this.dialogConfig.labelName="编辑"==i?"看板名称":"文件夹名称"),this.dialogConfig.dialogVisible=!0},close:function(){this.dialogConfig.dialogVisible=!1},save:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var a={alias:e.ruleForm.name,id:e.ruleForm.id};-1!=e.parentId&&(a.folderId=e.parentId,a.config=e.config),e.$apis.fetchPost(e.url,{params:a,Vue:e}).then(function(t){t.result?(e.$parent.filterData(),e.close(),e.$message({type:"success",message:t.message})):e.$message({type:"warning",message:t.message})})})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogConfig.dialogVisible?a("board-toast",{attrs:{config:e.dialogConfig},on:{cancel:e.close,save:e.save}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.dialogConfig.labelName,prop:"name"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{size:"mini"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name","string"==typeof t?t.trim():t)},expression:"ruleForm.name"}})],1)],1)],1)],1):e._e()},staticRenderFns:[]},f=a("C7Lr")(u,c,!1,null,null,null).exports,m={data:function(){return{dialogConfig:{title:"新增布局",dialogVisible:!1,width:"400px",btnData:["cancel","save"]},baseData:[],rules:{name:[{validator:function(e,t,a){""===t?a(new Error("请输入布局名称")):a()},trigger:"blur"}]},ruleForm:{name:""},url:"",parentId:-1}},mounted:function(){},methods:{show:function(e,t,a){this.ruleForm.name="",this.url=t,this.baseData=e,this.dialogConfig.dialogVisible=!0,this.parentId=a},close:function(){this.dialogConfig.dialogVisible=!1},save:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var a={alias:e.ruleForm.name,folderId:e.parentId};e.$apis.fetchPost(e.url,{params:a,Vue:e}).then(function(t){t.result?(e.$parent.filterData(),e.close(),e.$message({type:"success",message:t.message})):e.$message({type:"warning",message:t.message})})})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogConfig.dialogVisible?a("board-toast",{attrs:{config:e.dialogConfig},on:{cancel:e.close,save:e.save}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"布局名称",prop:"name"}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{size:"mini"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name","string"==typeof t?t.trim():t)},expression:"ruleForm.name"}})],1)],1)],1)],1):e._e()},staticRenderFns:[]},g=a("C7Lr")(m,h,!1,null,null,null).exports,p=a("9Bl9"),v=a("TrN9"),b=a("xXv6"),y={data:function(){return{form:{name:"",value:""},rules:{name:[{required:!0,message:"请输入看板名称",trigger:"blur"}],value:[{required:!0,message:"请选择布局方案",trigger:"change"}]},configData:{layout:[],rowHeight:50,isDraggable:!1,isResizable:!1,line:1},customConfig:{title:"看板设置",dialogVisible:!1,width:"400px",btnData:["cancel","save"],list:[]},modellist:[]}},props:["baseData"],methods:{show:function(e){this.form={name:"",value:""},this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.modellist=e,this.customConfig.dialogVisible=!0},cancel:function(){this.customConfig.dialogVisible=!1,this.$emit("close")},save:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;e.$apis.fetchPost(v.a.sideBar.add_layout,{params:{layoutId:e.form.value,alias:e.form.name,reportType:"自定义",folderId:e.baseData.id},Vue:e}).then(function(t){t.result&&(e.customConfig.dialogVisible=!1,e.$emit("addSuccess"),e.$message({type:"success",message:t.message}))})})},handleChange:function(e){var t=this;e&&this.$apis.fetchPost(p.a.sideBar.search_layout,{params:{id:e},Vue:this}).then(function(e){e.result&&(e.model.config?t.configData.layout=JSON.parse(e.model.config).layout:t.configData.layout=[])})}},components:{superLayout:b.a}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-border"},[a("board-toast",{attrs:{config:e.customConfig},on:{cancel:e.cancel,save:e.save,handleClose:function(t){e.customConfig.dialogVisible=!1}}},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"看板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入看板名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"布局方案",prop:"value"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"medium"},on:{change:e.handleChange},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}},e._l(e.modellist,function(t){return a("el-option-group",{key:t.id,attrs:{label:t.alias}},e._l(t.layouts,function(e){return a("el-option",{key:e.id,attrs:{label:e.alias,value:e.id}})}))}))],1)],1)],1),e._v(" "),a("div",{staticClass:"show-box no-scroll"},[a("super-layout",{ref:"superLayout",attrs:{config:e.configData,isToolbar:!1,tool:[]}})],1)])],1)},staticRenderFns:[]};var _=a("C7Lr")(y,D,!1,function(e){a("Q/Y4")},null,null).exports,C={data:function(){return{form:{name:"",value:""},rules:{name:[{required:!0,message:"请选输入看板名称",trigger:"blur"}],value:[{required:!0,message:"请选择模板方案",trigger:"change"}]},customConfig:{title:"看板设置",dialogVisible:!1,width:"400px",btnData:["cancel","save"],list:[]},modellist:[],currentTemUrl:""}},props:["baseData"],methods:{show:function(e){this.form={name:"",value:""},this.modellist=e,this.customConfig.dialogVisible=!0},cancel:function(){this.customConfig.dialogVisible=!1,this.$emit("close")},save:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;e.$apis.fetchPost(v.a.sideBar.add_layout,{params:{templateId:e.form.value,alias:e.form.name,reportType:"专业模板",folderId:e.baseData.id,templateUrl:e.form.templateUrl},Vue:e}).then(function(t){t.result&&(e.customConfig.dialogVisible=!1,e.$emit("addSuccess"),e.$message({type:"success",message:t.message}))})})},handleChange:function(e){if(!e)return this.currentTemUrl="",this.form.templateUrl="",!1;var t=this.modellist.findIndex(function(t){return t.id==e});this.form.templateUrl=this.modellist[t].templatePath,this.currentTemUrl=this.modellist[t].pic}},components:{superLayout:b.a}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"major-border"},[a("board-toast",{attrs:{config:e.customConfig},on:{cancel:e.cancel,save:e.save,handleClose:function(t){e.customConfig.dialogVisible=!1}}},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"看板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入看板名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"专业模板",prop:"value"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"medium"},on:{change:e.handleChange},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}},e._l(e.modellist,function(e){return a("el-option",{key:e.id,attrs:{label:e.alias,value:e.id}})}))],1)],1)],1),e._v(" "),a("div",{staticClass:"show-box no-scroll"},[a("img",{attrs:{src:e.currentTemUrl}})])])],1)},staticRenderFns:[]};var w=a("C7Lr")(C,$,!1,function(e){a("ZUxs")},null,null).exports,x=a("AnyI"),N={data:function(){return{moveData:{title:"添加看板",dialogVisible:!1,width:"500px"},currData:{},baseData:[]}},methods:{show:function(e,t){this.currData=t,this.baseData=e,this.moveData.dialogVisible=!0},customClick:function(){var e=this;this.$apis.fetchPost(p.a.sideBar.search,{params:{},Vue:this}).then(function(t){t.result&&(e.moveData.dialogVisible=!1,e.$refs.customBorder.show(t.model))})},addSuccess:function(){this.moveData.dialogVisible=!1,this.$parent.filterData()},close:function(){this.moveData.dialogVisible=!0},majorClick:function(){var e=this;this.$apis.fetchPost(x.a.pageUrl,{params:{},Vue:this}).then(function(t){t.result&&(e.moveData.dialogVisible=!1,e.$refs.majorBorder.show(t.model.items))})}},components:{customBorder:_,majorBorder:w}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("board-toast",{attrs:{config:e.moveData},on:{handleClose:function(t){e.moveData.dialogVisible=!1}}},[a("div",{staticClass:"border-add-btn",on:{click:e.customClick}},[e._v("自定义看板")]),e._v(" "),a("div",{staticClass:"border-add-btn",on:{click:e.majorClick}},[e._v("专业化模板报表")])]),e._v(" "),a("custom-border",{ref:"customBorder",attrs:{baseData:e.baseData},on:{close:e.close,addSuccess:e.addSuccess}}),e._v(" "),a("major-border",{ref:"majorBorder",attrs:{baseData:e.baseData},on:{close:e.close,addSuccess:e.addSuccess}})],1)},staticRenderFns:[]};var I=a("C7Lr")(N,F,!1,function(e){a("sxIm")},"data-v-5a650f70",null).exports,V=a("9rMa"),k={data:function(){return{isSearch:!1,searchData:"",openIndex:-1,activeBar:{},dragNode:{dragParentId:null,dragData:null,lastParentId:null,dragParentNode:null},sidbarData:[],emptyText:"暂无数据"}},props:{title:{type:String,default:function(){return""},require:!1},urls:{type:Object,default:function(){},require:!0},currentNode:{type:Object,default:function(){return{}},require:!0},configData:{type:Object,default:function(){},require:!0},prop:{default:function(){return{children:"layouts"}}}},computed:r()({},Object(V.b)(["getCurrConfigs","getCurrNode","getCurrchartId"])),mounted:function(){},methods:{setFileIcon:function(e){return[{"iconfont icon-wenjianjia":0==e.isOpen||!e.isOpen,"iconfont icon-wenjianjia-zhankai":1==e.isOpen}]},setOpenState:function(e,t){this.openIndex=t,e.isOpen?this.$set(e,"isOpen",!1):this.$set(e,"isOpen",!0)},setActiveBar:function(e,t){this.$set(this.activeBar,"isActive",!1),this.activeBar=e,this.$set(e,"isActive",!0),this.getDesign(e,t),this.$emit("currentChange",e)},getDesign:function(e,t){var a=this;this.$apis.fetchPost(this.urls.sideBar.search_layout,{params:{id:e.id},Vue:this}).then(function(i){i.result&&("布局库"==a.title?(a.$set(e,"config",i.model.config),i.model.config?(a.$set(a.currentNode,"config",JSON.parse(i.model.config)),a.configData.line=a.currentNode.config.line,a.configData.layout=a.currentNode.config.layout):(a.configData.line=0,a.configData.layout=[])):"自定义"==e.reportType?a.$nextTick(function(s){a.$emit("boardHandler",i,e,t)}):a.$set(e,"unzipPath",i.model.unzipPath),a.$set(a.currentNode,"alias",i.model.alias),a.$set(a.currentNode,"id",e.id),a.$set(a.currentNode,"folderId",i.model.folderId))})},operation:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;switch(e.target.classList[1]){case"icon-xinzeng":this.add(t,a,s);break;case"icon-bianji":i?this.editFile(t,a):this.edit(t,a,s);break;case"icon-fuzhi":this.copy(a,s);break;case"icon-shanchu":i?this.remove(a.id,this.urls.sideBar.del_File):this.remove(a.id,this.urls.sideBar.del_layout)}},searchEnterFun:function(e,t){"blur"==t?this.filterData():13==(window.event?e.keyCode:e.which)&&this.filterData()},filterData:function(e){var t=this,a=this.searchData?{alias:this.searchData}:{};this.emptyText=this.searchData?"木有查到您需要的数据":"暂无数据",this.$apis.fetchPost(this.urls.sideBar.search,{params:a,Vue:this}).then(function(a){if(a.result){var i=JSON.parse(s()(t.sidbarData));if(e){var n=a.model.findIndex(function(t){return e.folderId==t.id});a.model[n].isOpen=!0;var r=a.model[n].reports.findIndex(function(t){return e.id==t.id});-1!=r&&t.setActiveBar(a.model[n].reports[r])}a.model.forEach(function(e,s){var n=i.findIndex(function(t){return t.id==e.id});-1!=n&&(a.model[s].isOpen=i[n].isOpen),"看板库"==t.title&&a.model.forEach(function(e,t){-1!=e.reports.findIndex(function(e){return 0==e.isDesisn})&&(a.model[t].isFileDesign=!0),e.reports.forEach(function(t,a){0==t.isDesisn&&(e.reports[a].isboardDesign=!0)})})}),t.sidbarData=a.model}else t.$message({type:"warning",message:a.message})})},addFile:function(){this.$refs.layoutAddFile.show(this.sidbarData,this.urls.sideBar.add_File)},add:function(e,t,a){"布局库"==this.title?this.$refs.layoutAdd.show(e,this.urls.sideBar.add_layout,a):this.$refs.boardAdd.show(e,this.urls.sideBar.add_layout,a)},editFile:function(e,t){this.$refs.layoutEidt.show(e,this.urls.sideBar.edit_File,t)},edit:function(e,t,a){this.$refs.layoutEidt.show(e,this.urls.sideBar.edit_layout,t,"编辑",a)},copy:function(e,t){var a=this,i={};"布局库"==this.title?(i={alias:e.alias,folderId:t,config:e.config},this.$confirm("您正在进行复制操作，确定继续吗？").then(function(e){a.$apis.fetchPost(a.urls.sideBar.add_layout,{params:i,Vue:a}).then(function(e){e.result?(a.filterData(),a.$message({type:"success",message:e.message})):a.$message({type:"warning",message:e.message})})}).catch(function(e){})):(i={alias:e.alias,folderId:t,layoutId:e.layoutId,reportType:"自定义",id:e.id},this.$confirm("您正在进行复制操作，确定继续吗？").then(function(e){a.$apis.fetchPost(a.urls.sideBar.copy_layout,{params:i,Vue:a}).then(function(e){e.result?(a.filterData(),a.$message({type:"success",message:e.message})):a.$message({type:"warning",message:e.message})})}).catch(function(e){}))},remove:function(e,t){var a=this;this.$confirm("删除操作不可逆，确定删除吗？").then(function(i){a.$apis.fetchPost(t,{params:{id:e},Vue:a}).then(function(e){e.result?(a.configData.layout=[],a.$message({type:"success",message:e.message}),a.filterData()):a.$message({type:"warning",message:e.message})})}).catch(function(e){})},adjust:function(e,t){var a=this,i={id:this.dragNode.dragData.id,folderId:e,alias:this.dragNode.dragData.alias,config:this.dragNode.dragData.config};this.$apis.fetchPost(this.urls.sideBar.edit_layout,{params:i,Vue:this}).then(function(e){e.result?(a.$message({type:"success",message:e.message}),a.filterData()):a.$message({type:"warning",message:e.message})})},dragstart:function(e,t,a){this.dragNode={dragData:t,dragParentId:a.id,lastParentId:a.id,dragParentNode:a}},dragenter:function(e,t,a){"sbl-item-header"!=e.target.className&&"sbl-l-item"!=e.target.className||(e.target.style["border-bottom"]="1px solid #409eff"),this.dragNode.lastParentId!=t.id&&this.$set(t,"isOpen",!0)},dragleave:function(e,t,a,i){"sbl-item-header"!=e.target.className&&"sbl-l-item"!=e.target.className||(e.target.style["border-bottom"]="1px solid #fff"),this.dragNode.lastParentId=t.id},dragend:function(e,t,a){var i=this;if("布局库"==this.title){var s=this.dragNode.dragParentNode.layouts.findIndex(function(e){return e.id==i.dragNode.dragData.id});if("sbl-item-header"==e.target.className)-1!=s&&(this.dragNode.dragParentNode.layouts.splice(s,1),this.adjust(t.id,1)),t.layouts.unshift(this.dragNode.dragData);else if("sbl-l-item"==e.target.className&&a){-1!=s&&this.dragNode.dragParentNode.layouts.splice(s,1);var n=t.layouts.findIndex(function(e){return e.id==a.id});t.layouts.splice(n+1,0,this.dragNode.dragData),this.adjust(t.id,n+2)}e.target.style["border-bottom"]="1px solid #ffffff00"}else{var r=this.dragNode.dragParentNode.reports.findIndex(function(e){return e.id==i.dragNode.dragData.id});if("sbl-item-header"==e.target.className)-1!=r&&(this.dragNode.dragParentNode.reports.splice(r,1),this.adjust(t.id,1)),t.reports.unshift(this.dragNode.dragData);else if("sbl-l-item"==e.target.className&&a){-1!=r&&this.dragNode.dragParentNode.reports.splice(r,1);var o=t.reports.findIndex(function(e){return e.id==a.id});t.reports.splice(o+1,0,this.dragNode.dragData),this.adjust(t.id,o+2)}e.target.style["border-bottom"]="1px solid #ffffff00"}}},components:{layoutEidt:f,layoutAdd:g,layoutAddFile:d,boardAdd:I}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sider-bar"},[a("div",{staticClass:"sider-bar-body"},[a("div",{staticClass:"sider-bar-head"},[a("div",{staticClass:"sbh-title"},[e._v("\n        "+e._s(e.title)+"\n      ")]),e._v(" "),a("div",{staticClass:"sbh-operation"},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isSearch,expression:"isSearch"}],staticStyle:{width:"100px"},attrs:{placeholder:"请输入内容",size:"mini"},on:{blur:function(t){e.searchEnterFun(t,"blur")}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.searchEnterFun(t,"keyup")}},model:{value:e.searchData,callback:function(t){e.searchData="string"==typeof t?t.trim():t},expression:"searchData"}}),e._v(" "),a("i",{staticClass:"iconfont icon-chaxun",on:{click:function(t){e.isSearch=!e.isSearch}}}),e._v(" "),a("i",{staticClass:"iconfont icon-xinzeng-",on:{click:e.addFile}}),e._v(" "),e._t("default")],2)]),e._v(" "),e.sidbarData.length?e._e():a("div",{staticClass:"sider-bar-empty"},[e._v(e._s(e.emptyText))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sidbarData.length,expression:"sidbarData.length"}],staticClass:"sider-bar-list"},e._l(e.sidbarData,function(t,i){return a("div",{key:t.id,staticClass:"sbl-item",on:{dragover:function(e){e.preventDefault()},drop:function(a){a.preventDefault(),e.dragend(a,t)},dragenter:function(a){a.preventDefault(),e.dragenter(a,t)},dragleave:function(a){a.preventDefault(),e.dragleave(a,t)}}},[a("div",{staticClass:"sbl-item-header"},[a("div",{staticClass:"sbl-l-item-left",on:{click:function(a){e.setOpenState(t,i)}}},[a("i",{class:e.setFileIcon(t)}),e._v(" "),a("span",[e._v(e._s(t.alias))])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.openIndex==i&&t.isOpen,expression:"openIndex==index&&data.isOpen"}],staticClass:"sbl-l-item-right",on:{click:function(a){e.operation(a,t,t,"file",t.id)}}},[a("i",{staticClass:"iconfont icon-xinzeng"}),e._v(" "),t.isFileDesign?e._e():a("i",{staticClass:"iconfont icon-bianji"}),e._v(" "),t.isFileDesign?e._e():a("i",{staticClass:"iconfont icon-shanchu"})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"data.isOpen"}],staticClass:"sbl-items-list"},e._l(t[e.prop.children],function(i,s){return a("div",{key:i.id,staticClass:"sbl-l-item",class:{"active-bar":e.activeBar.id===i.id},on:{drop:function(a){a.preventDefault(),e.dragend(a,t,i)},dragleave:function(a){a.preventDefault(),e.dragleave(a,t,i,s)},dragenter:function(a){a.preventDefault(),e.dragenter(a,t,i)}}},[a("div",{staticClass:"sbl-l-item-left",attrs:{draggable:"true"},on:{click:function(t){e.setActiveBar(i,e.currentNode.id)},dragstart:function(a){e.dragstart(a,i,t)}}},[a("i",{staticClass:"iconfont icon-kanbanmiaoshu"}),e._v(" "),a("span",{attrs:{title:i.alias}},[e._v(e._s(i.alias))])]),e._v(" "),i.isboardDesign?e._e():a("div",{directives:[{name:"show",rawName:"v-show",value:i.isActive,expression:"item.isActive"}],staticClass:"sbl-l-item-right",on:{click:function(a){e.operation(a,t.layouts,i,"",t.id)}}},[a("i",{staticClass:"iconfont icon-bianji"}),e._v(" "),a("i",{staticClass:"iconfont icon-fuzhi"}),e._v(" "),a("i",{staticClass:"iconfont icon-shanchu"})])])}))])}))]),e._v(" "),a("layout-add-file",{ref:"layoutAddFile",attrs:{title:e.title}}),e._v(" "),a("layout-add",{ref:"layoutAdd"}),e._v(" "),a("layout-eidt",{ref:"layoutEidt",attrs:{title:e.title}}),e._v(" "),a("board-add",{ref:"boardAdd"})],1)},staticRenderFns:[]};var B=a("C7Lr")(k,P,!1,function(e){a("Ysrz")},null,null);t.a=B.exports},Ysrz:function(e,t){},ZUxs:function(e,t){},l6i0:function(e,t){},oMO2:function(e,t,a){a("A1pn"),a("IsPG"),e.exports=a("tcIe")},sxIm:function(e,t){},tcIe:function(e,t,a){var i=a("93K8"),s=a("YW8S");e.exports=a("AKd3").getIterator=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},uKtV:function(e,t){}});